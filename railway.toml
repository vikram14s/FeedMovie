[build]
builder = "nixpacks"

[deploy]
# Install Playwright browsers at runtime (build env differs from runtime env)
startCommand = "playwright install --with-deps chromium && cd backend && python app.py"

# Health check (longer timeout for first deploy)
healthcheckPath = "/api/health"
healthcheckTimeout = 300

# Railway will assign a port via PORT env var
restartPolicyType = "on_failure"
restartPolicyMaxRetries = 3

# NOTE: Add a Railway Volume mounted at /app/data to persist the SQLite database
# Go to Railway Dashboard > Your Service > Settings > Volumes
# Mount path: /app/data
