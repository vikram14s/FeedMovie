# Nixpacks config for FeedMovie
# Builds frontend (Node) and backend (Python)

# Disable auto-detection - use our custom phases
providers = []

[phases.setup]
nixPkgs = ["python312", "nodejs_20", "npm", "gcc"]

[phases.install]
dependsOn = ["setup"]
cmds = [
    "cd frontend && npm ci",
    "pip install -r requirements.txt"
]

[phases.build]
dependsOn = ["install"]
cmds = ["cd frontend && npm run build"]

[start]
cmd = "playwright install --with-deps chromium && cd backend && python app.py"
